# Migration `20190801205526-add-profile-table`

This migration has been generated by Christian de Botton at 8/1/2019, 8:55:26 PM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "cdb"."Profile"("id" text NOT NULL  ,"firstName" text   ,"lastName" text   ,PRIMARY KEY ("id"));

ALTER TABLE "cdb"."User" ADD COLUMN "profile" text NOT NULL  REFERENCES "cdb"."Profile"("id");

CREATE UNIQUE INDEX "Profile.id._UNIQUE" ON "cdb"."Profile"("id")
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration 20190730225246-create-user..20190801205526-add-profile-table
--- datamodel.dml
+++ datamodel.dml
@@ -16,6 +16,13 @@
   email     String   @unique
   password  String   @unique
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
+  profile   Profile
+}
+model Profile {
+  id        String  @default(cuid()) @unique @id
+  firstName String?
+  lastName  String?
+  user      User
 }
```

## Photon Usage

You can use a specific Photon built for this migration (20190801205526-add-profile-table)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20190801205526-add-profile-table'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
