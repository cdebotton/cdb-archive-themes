generator photon {
  provider  = "photonjs"
  platforms = ["native", "linux-glibc-libssl1.0.1"]
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRESQL_URL")
}

model User {
  id        String    @default(cuid()) @unique @id
  email     String    @unique
  password  String
  firstName String?
  lastName  String?
  deleted   Boolean   @default(false)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  lastLogin DateTime?
  media     Media[]
  galleries Gallery[]
}

model Gallery {
  id          String   @default(cuid()) @unique @id
  uri         String   @unique
  title       String
  description String
  deleted     Boolean  @default(false)
  publishedAt DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  media       Media[]
  author      User
}

model Media {
  id        String    @default(cuid()) @unique @id
  key       String
  etag      String
  bucket    String
  mimetype  String
  encoding  String
  deleted   Boolean   @default(false)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  gallery   Gallery[]
  author    User
}